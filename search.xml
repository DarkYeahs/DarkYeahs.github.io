<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[å…³äºŽä¸€é“jsé¢˜ç›®çš„çŒœæƒ³]]></title>
    <url>%2F2017%2F10%2F31%2F%E5%85%B3%E4%BA%8E%E4%B8%80%E9%81%93js%E9%A2%98%E7%9B%AE%E7%9A%84%E7%8C%9C%E6%83%B3%2F</url>
    <content type="text"><![CDATA[æ˜¨å¤©åœ¨GitHubä¸Šæ— æ„é€›åˆ°äº†creeperyangçš„åšå®¢,åœ¨ä»–åšå®¢çš„JavaScripté—®é¢˜é›†é”¦ï¼Œçœ‹åˆ°äº†è¿™é“é¢˜ï¼šé—®é¢˜ï¼š å°è¯•è§£é‡Šä¸‹è¿žç­‰èµ‹å€¼çš„è¿‡ç¨‹ã€‚ä¸‹é¢çš„ä»£ç ä¸ºä»€ä¹ˆæ˜¯è¿™æ ·çš„è¾“å‡ºï¼Ÿ12345var a = &#123;n: 1&#125;; var b = a;a.x = a = &#123;n: 2&#125;; console.log(a.x);// --&gt; undefined console.log(b.x);// --&gt; &#123;n:2&#125; åšä¸»æ˜¯è¿™æ ·è§£é‡Šçš„ï¼š æŒ‰ç…§es5è§„èŒƒï¼Œé¢˜ä¸­è¿žç­‰èµ‹å€¼ç­‰ä»·äºŽa.x = (a = {n: 2});ï¼ŒæŒ‰ä¼˜å…ˆèŽ·å–å·¦å¼•ç”¨ï¼ˆlrefï¼‰ï¼Œç„¶åŽèŽ·å–å³å¼•ç”¨ï¼ˆrrefï¼‰çš„é¡ºåºï¼Œa.xå’Œaä¸­çš„aéƒ½æŒ‡å‘äº†{n: 1}ã€‚è‡³æ­¤ï¼Œè‡³å…³é‡è¦æˆ–è€…è¯´æœ€è¿·æƒ‘çš„ä¸€æ­¥æ˜Žç¡®ã€‚(a = {n: 2})æ‰§è¡Œå®ŒæˆåŽï¼Œå˜é‡aæŒ‡å‘{n: 2}ï¼Œå¹¶è¿”å›ž{n: 2};æŽ¥ç€æ‰§è¡Œa.x = {n: 2}ï¼Œè¿™é‡Œçš„aå°±æ˜¯bï¼ˆæŒ‡å‘{n: 1}ï¼‰ï¼Œæ‰€ä»¥b.xå°±æŒ‡å‘äº†{n: 2}ã€‚ åŽé¢è‡ªå·±æƒ³äº†ä¸‹æœ‰ç‚¹è§£é‡Šä¸é€šï¼Œå› ä¸ºå½“açš„æŒ‡å‘æ›´æ”¹çš„æ—¶å€™ï¼Œa.xä¸­çš„aæŒ‡å‘ä¹Ÿåº”è¯¥åŒæ—¶æ›´æ”¹ï¼Œé‚£ä¹ˆxå±žæ€§ä¹Ÿåº”è¯¥æ˜¯åœ¨æ–°çš„å¯¹è±¡ä¸Šæ·»åŠ ï¼Œä¸ºä»€ä¹ˆä¼šè¯´è¿™é‡Œçš„aä»ç„¶å°±æ˜¯bå³æŒ‡å‘çš„æ˜¯{n: 1},æ‰€ä»¥å¯¹åŽŸä»£ç è¿›è¡Œäº†æ”¹é€ ï¼š12345678var a = &#123;n: 1&#125;; var b = a;function test () &#123; return a = &#123;n: 2&#125;;&#125;a.x = test();console.log(a.x);// --&gt; undefined console.log(b.x);// --&gt; &#123;n:2&#125; è¿è¡Œç»“æžœä¸ŽåŽŸç»“æžœç›¸åŒã€‚åœ¨ä½¿ç”¨chromeçš„debuggeræŸ¥çœ‹ä»£ç è¿è¡Œçš„æ—¶å€™ï¼Œå‘çŽ°chromeåœ¨è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œè¿è¡Œåˆ°a.x = test()è¿™è¡Œä»£ç çš„æ—¶å€™ä¼šåœç•™åœ¨a.xå†è¿è¡Œtest(),è”ç³»åˆ°å…³äºŽå±žæ€§åœ¨åŽŸåž‹é“¾ä¸Šçš„æœç´¢ï¼Œä½œå‡ºä»¥ä¸‹çš„è§£é‡Šï¼ša.x = a = {n: 2}åœ¨è¿è¡Œè¿‡ç¨‹ä¸­æµè§ˆå™¨ä¼šé¦–å…ˆå°è¯•è¯»å–å±žæ€§xçš„å€¼ï¼Œå³åœ¨{n: 1}ä¸Šæœç´¢xå±žæ€§ï¼Œåœ¨æœç´¢ä¸åˆ°çš„å‰æä¸‹åˆç”±äºŽèµ‹å€¼çš„æ“ä½œï¼Œä¼šåœ¨{n: 1}ä¸Šåˆ›å»ºxå±žæ€§å¹¶ä¸”xå±žæ€§æŒ‡å‘{n: 2},ç”±äºŽaçš„æŒ‡å‘å‘ç”Ÿå˜æ›´,æ‰€ä»¥a.xä¸ºundefined,b.xä¸º{n: 2}]]></content>
      <categories>
        <category>JavaScript</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Vue2.xå‘¨æœŸç®€è¿°]]></title>
    <url>%2F2017%2F10%2F28%2FVue2-x%E5%91%A8%E6%9C%9F%E7%AE%80%E8%BF%B0%2F</url>
    <content type="text"><![CDATA[é¦–å…ˆè´´ä¸€å¼ å¤§å›¾ï¼Œè·Ÿvue1.xç›¸æ¯”ã€‚vue2.0æ¸²æŸ“å‘¨æœŸå‘ç”Ÿäº†è¾ƒå¤§çš„å˜åŒ–ã€‚Vueçš„ç”Ÿå‘½å‘¨æœŸå˜ä¸ºbeforeCreateï¼ˆVue1.xä¸ºcreatedï¼‰ï¼Œcreatedï¼ˆvue1.xä¸ºbeforeCompileï¼‰ï¼ŒbeforeMountï¼ˆvue1.xä¸ºcompileï¼‰ï¼Œmountedï¼ˆvue1.xä¸ºreadyï¼‰ä»¥åŠbeforeDestroyï¼Œdestroyed. beforeCreateå‘¨æœŸåœ¨beforeCreateå‘¨æœŸå‰æ˜¯èŽ·å–ä¸åˆ°ä»»ä½•æ•°æ®çš„ï¼Œè¿™ä¸ªå‘¨æœŸåªæ˜¯è¿›è¡Œäº‹ä»¶çš„åˆå§‹åŒ–ä»¥åŠç”Ÿå‘½å‘¨æœŸçš„åˆå§‹åŒ–ï¼Œåœ¨å®Œæˆäº‹ä»¶çš„åˆå§‹åŒ–ä»¥åŠç”Ÿå‘½å‘¨æœŸçš„åˆå§‹åŒ–åŽä¼šè§¦å‘beforeCreateçš„é’©å­å‡½æ•°ï¼Œå¯¹äºŽæ— å…³æ•°æ®ä¸Žæ¸²æŸ“åŽçš„domæ“ä½œçš„å¯ä»¥åœ¨è¿™ä¸ªå‘¨æœŸå¼€å§‹æ‰§è¡Œ createdå‘¨æœŸåœ¨createdå‘¨æœŸå‰ï¼Œå¯¹æ•°æ®é€šè¿‡vueæœ¬èº«æ”¹é€ Object.prototype.setter å’ŒObject.prototype.getterä¸¤ä¸ªå‡½æ•°å¯¹ä¼ å…¥çš„æ•°æ®è¿›è¡Œç›‘å¬ï¼Œåœ¨è¿™ä¸ªå‘¨æœŸå¯ä»¥å¯¹æ— å…³domçš„æ“ä½œè¿›è¡Œå¤„ç†ï¼Œæ¯”å¦‚æ ¹æ®ä¼ å…¥çš„æ•°æ®èŽ·å–åŽå°æ•°æ®ç­‰æ“ä½œå¯ä»¥åœ¨è¿™ä¸ªå‘¨æœŸè¿›è¡Œ beforeMountå‘¨æœŸåœ¨è¿™ä¸ªå‘¨æœŸä¸»è¦å®Œæˆè™šæ‹Ÿdomæ“ä½œï¼ŒVueä¼šåŽ»æ£€æµ‹æ˜¯å¦æœ‰æ²¡æœ‰elè¿™ä¸ªé…ç½®ï¼Œå¦‚æžœæ²¡æœ‰ï¼Œåˆ™ä¼šç­‰å¾…vm.$mounted(el)çš„è°ƒç”¨ã€‚æŽ¥ç€æ£€æµ‹æ˜¯å¦æœ‰æ²¡æœ‰templateè¿™ä¸ªé…ç½®ã€‚å¦‚æžœæœ‰ï¼Œè¿™å°†è¿™ä¸ªä¼ å…¥renderå‡½æ•°è¿›è¡Œç¼–è¯‘ï¼Œå¦‚æžœæ²¡æœ‰ï¼Œåˆ™å°†elå…ƒç´ å†…éƒ¨çš„domä½œä¸ºtemplateå‚æ•°ä¼ å…¥renderã€‚å¯¹äºŽè¿™ä¸ªå‘¨æœŸå¦‚æžœä¸æ¶‰åŠåˆ°äº‹ä»¶ç»‘å®šæ–¹é¢çš„äº‹ä»¶å¯ä»¥åœ¨è¿™ä¸ªå‘¨æœŸè¿›è¡Œæ“ä½œ mountedå‘¨æœŸè¿™ä¸ªå‘¨æœŸæ˜¯å®Œæˆå°†æž„å»ºçš„è™šæ‹Ÿdomæ¸²æŸ“åˆ°é¡µé¢ä¸Šçš„æ“ä½œï¼Œè¿™ä¸ªæ—¶å€™å¯ä»¥å¯¹æ•´ä¸ªé¡µé¢è¿›è¡Œæ¸²æŸ“å®ŒæˆåŽçš„å„ç§åŠ¨æ€æ“ä½œ beforeDestroyå‘¨æœŸå’Œdestroyedå‘¨æœŸbeforeDestroyå‘¨æœŸå’Œdestroyedå‘¨æœŸä¸»è¦æ¶‰åŠåˆ°ç»„ä»¶çš„!é”€æ¯,ç›®å‰å°šæœªæ¶‰åŠï¼Œç­‰æ¶‰åŠäº†å†è¡¥ä¸Š]]></content>
      <categories>
        <category>ç¬”è®°</category>
      </categories>
      <tags>
        <tag>ç¬”è®°</tag>
        <tag>Vue</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[event loopå­¦ä¹ å›žé¡¾]]></title>
    <url>%2F2017%2F10%2F27%2Fevent-loop%E5%AD%A6%E4%B9%A0%E5%9B%9E%E9%A1%BE%2F</url>
    <content type="text"><![CDATA[ä»¥å‰äº‹ä»¶é˜Ÿåˆ—åœ¨æˆ‘çš„è®¤çŸ¥èŒƒå›´å†…æ˜¯åªæœ‰ä¸¤ç§ï¼šåŒæ­¥äº‹ä»¶é˜Ÿåˆ—ä¸Žå¼‚æ­¥äº‹ä»¶é˜Ÿåˆ—ã€‚åœ¨å¤„ç†äº‹ä»¶é˜Ÿåˆ—è¿‡ç¨‹ä¸­ï¼Œæµè§ˆå™¨ä¼šå®šæœŸæ£€æµ‹åŒæ­¥é˜Ÿåˆ—å¹¶ä»ŽåŒæ­¥äº‹ä»¶é˜Ÿåˆ—èŽ·å–äº‹ä»¶ï¼Œå¹¶å°†ä¹‹æ‰§è¡Œï¼Œåœ¨è¿™è¿‡ç¨‹ä¸­ï¼Œå¼‚æ­¥é˜Ÿåˆ—è§¦å‘å›žè°ƒäº‹ä»¶æ—¶ï¼Œä¼šå°†å…¶ä»Žå¼‚æ­¥é˜Ÿåˆ—ä¸­å‡ºé˜Ÿï¼ŒåŠ å…¥åˆ°åŒæ­¥äº‹ä»¶é˜Ÿåˆ—ä¸­ï¼Œä¸€ç›´é‡å¤ä¸Šè¿°è¿‡ç¨‹ã€‚ ä½†åœ¨è¿™é‡Œæœ‰ä¸ªç–‘é—®ï¼Œå½“å¤šä¸ªå¼‚æ­¥äº‹ä»¶é˜Ÿåˆ—åŒæ—¶åˆ°åŒæ­¥é˜Ÿåˆ—è¿‡ç¨‹ä¸­æ˜¯ä»¥ä»€ä¹ˆæ ‡å‡†åŽ»å®žçŽ°çš„ï¼Ÿ è¿™ä¸ªç–‘é—®ç›´åˆ°å‰æ®µæ—¶é—´çœ‹Vueæœ‰å…³çš„åšå®¢ä¸­æ— æ„é—´çœ‹åˆ°Chunk liuçš„Vueæºç è¯¦è§£ä¹‹nextTickï¼šMutationObserveråªæ˜¯æµ®äº‘ï¼Œmicrotaskæ‰æ˜¯æ ¸å¿ƒæ‰äº†è§£åˆ°microTaskçš„æ¦‚å¿µï¼Œæ‰çŸ¥é“taskçš„åŒºåˆ†ä¸æ˜¯æˆ‘åŽŸå…ˆç†è§£çš„é‚£ä¹ˆä¸€å›žäº‹ã€‚åŽé¢åˆè¯»äº†Jake Archibald å†™çš„Tasksï¼Œ microtasksï¼Œ queues and schedulesæ‰çŸ¥é“event loopåˆ°åº•æ˜¯ä¸ªæ€Žä¹ˆå›žäº‹ã€‚ å…ˆè¯´ä¸‹taskè·ŸmicroTaskçš„æ¦‚å¿µ tasktask åˆç§° macrotaskã€‚HTML è§„èŒƒä¸­ task çš„æœ‰å…³ç« èŠ‚æ˜¯è¿™ä¹ˆè¯´çš„ï¼š ä¸€ä¸ª eventloop æœ‰ä¸€æˆ–å¤šä¸ª task é˜Ÿåˆ—ã€‚æ¯ä¸ª task ç”±ä¸€ä¸ªç¡®å®šçš„ task æºæä¾›ã€‚ä»Žä¸åŒ task æºè€Œæ¥çš„ task å¯èƒ½ä¼šæ”¾åˆ°ä¸åŒçš„ task é˜Ÿåˆ—ä¸­ã€‚ä¾‹å¦‚ï¼Œæµè§ˆå™¨å¯èƒ½å•ç‹¬ä¸ºé¼ æ ‡é”®ç›˜äº‹ä»¶ç»´æŠ¤ä¸€ä¸ª task é˜Ÿåˆ—ï¼Œæ‰€æœ‰å…¶ä»– task éƒ½æ”¾åˆ°å¦ä¸€ä¸ª task é˜Ÿåˆ—ã€‚é€šè¿‡åŒºåˆ† task é˜Ÿåˆ—çš„ä¼˜å…ˆçº§ï¼Œä½¿é«˜ä¼˜å…ˆçº§çš„ task ä¼˜å…ˆæ‰§è¡Œï¼Œä¿è¯æ›´å¥½çš„äº¤äº’ä½“éªŒã€‚ taskæºåŒ…æ‹¬ï¼š DOM æ“ä½œä»»åŠ¡æºï¼šå¦‚å…ƒç´ ä»¥éžé˜»å¡žæ–¹å¼æ’å…¥æ–‡æ¡£ ç”¨æˆ·äº¤äº’ä»»åŠ¡æºï¼šå¦‚é¼ æ ‡é”®ç›˜äº‹ä»¶ã€‚ç”¨æˆ·è¾“å…¥äº‹ä»¶ï¼ˆå¦‚ clickï¼‰ å¿…é¡»ä½¿ç”¨ task é˜Ÿåˆ— ç½‘ç»œä»»åŠ¡æºï¼šå¦‚ XHR å›žè°ƒ history å›žæº¯ä»»åŠ¡æºï¼šä½¿ç”¨ history.back() æˆ–è€…ç±»ä¼¼ APIæ­¤å¤– setTimeoutã€setIntervalã€IndexDB æ•°æ®åº“æ“ä½œç­‰ä¹Ÿæ˜¯ä»»åŠ¡æºã€‚ microTaskmicroTaskï¼šè§„èŒƒä¸Šæ˜¯è¿™ä¹ˆè¯´çš„ï¼šæ¯ä¸ªevent loopéƒ½æœ‰ä¸€ä¸ªmicroTaskï¼Œ microTaskå­˜åœ¨äºŽmicroTaské˜Ÿåˆ—ä¸­ã€‚microTaskä¸»è¦åˆ†ä»¥ä¸‹å‡ ç§ï¼š Promise.then MutationObserver Object.observeå…¶ä¸­Promise.thenç”±äºŽä¸åŒæµè§ˆå™¨çš„å®žçŽ°æœ‰æ‰€ä¸åŒï¼Œæœ‰äº›è¿è¡Œè§¦å‘çš„æ˜¯microTaskï¼Œæœ‰äº›è§¦å‘çš„è§¦å‘çš„æ˜¯taskï¼Œä¸è¿‡æ ‡å‡†ä¸Šæ˜¯è§¦å‘microTaskçš„ event loopçš„å¾ªçŽ¯è¿‡ç¨‹åœ¨è¯´äº†taskè·ŸmicroTaskçš„æ¦‚å¿µåŽå†è¯´ä¸‹event loopçš„å¾ªçŽ¯è¿‡ç¨‹ã€‚å…ˆè´´ä¸€ä¸‹è§„èŒƒçš„è¯´æ³•(æœ‰ç‚¹å‡‘å­—æ•°çš„å«Œç–‘ã€‚ã€‚ã€‚)ï¼š An event loop must continually run through the following steps for as long as it exists: Select the oldest task on one of the event loopâ€™s task queues, if any, ignoring, in the case of a browsing context event loop, tasks whose associated Documents are not fully active. The user agent may pick any task queue. If there is no task to select, then jump to the microtasks step below. Set the event loopâ€™s currently running task to the task selected in the previous step. Run: Run the selected task. Set the event loopâ€™s currently running task back to null. Remove the task that was run in the run step above from its task queue. Microtasks: Perform a microtask checkpoint. //è¿™é‡Œä¼šæ‰§è¡Œæ‰€æœ‰çš„microtask Update the rendering: If this event loop is a browsing context event loop (as opposed to a worker event loop), then run the following substeps.7.1 Let now be the value that would be returned by the Performance objectâ€™s now() method.7.2 Let docs be the list of Document objects associated with the event loop in question, sorted arbitrarily except that the following conditions must be met:7.3 If there are top-level browsing contexts B that the user agent believes would not benefit from having their rendering updated at this time, then remove from docs all Document objects whose browsing contextâ€™s top-level browsing context is in B.7.4 If there are a nested browsing contexts B that the user agent believes would not benefit from having their rendering updated at this time, then remove from docs all Document objects whose browsing context is in B.7.5 For each fully active Document in docs, run the resize steps for that Document, passing in now as the timestamp. [CSSOMVIEW]7.6 For each fully active Document in docs, run the scroll steps for that Document, passing in now as the timestamp. [CSSOMVIEW]7.7 For each fully active Document in docs, evaluate media queries and report changes for that Document, passing in now as the timestamp. [CSSOMVIEW]7.8 For each fully active Document in docs, run CSS animations and send events for that Document, passing in now as the timestamp. [CSSANIMATIONS]7.9 For each fully active Document in docs, run the fullscreen rendering steps for that Document, passing in now as the timestamp. [FULLSCREEN]7.10 For each fully active Document in docs, run the animation frame callbacks for that Document, passing in now as the timestamp.7.11 For each fully active Document in docs, run the update intersection observations steps for that Document, passing in now as the timestamp. [INTERSECTIONOBSERVER]7.12 For each fully active Document in docs, update the rendering or user interface of that Document and its browsing context to reflect the current state.If this is a worker event loop (i.e. one running for a WorkerGlobalScope), but there are no tasks in the event loopâ€™s task queues and the WorkerGlobalScope objectâ€™s closing flag is true, then destroy the event loop, aborting these steps, resuming the run a worker steps described in the Web workers section below.Return to the first step of the event loop. å¤è¿°ä¸€ä¸‹ä¸Šé¢è¯´çš„ åœ¨å‰5çš„æ­¥éª¤æ˜¯æ‰¾å‡ºå­˜åœ¨taské˜Ÿåˆ—ä¸­æ—¶é—´æœ€é•¿çš„taskï¼Œå‡ºé˜Ÿå¹¶å°†ä¹‹æ‰§è¡Œã€‚åœ¨ç¬¬å…­æ­¥çš„æ—¶å€™å°†microTaské˜Ÿåˆ—ä¸­çš„microTaskå…¨éƒ¨æ‰§è¡Œç¬¬ä¸ƒæ­¥ï¼Œæ›´æ–°æ¸²æŸ“ï¼š7.2åˆ°7.4ï¼Œå½“å‰è½®æ¬¡çš„event loopä¸­å…³è”åˆ°çš„documentå¯¹è±¡ä¼šä¿æŒæŸäº›ç‰¹å®šé¡ºåºï¼Œè¿™äº›documentå¯¹è±¡éƒ½ä¼šæ‰§è¡Œéœ€è¦æ‰§è¡ŒUI renderçš„ï¼Œä½†æ˜¯å¹¶ä¸æ˜¯æ‰€æœ‰å…³è”åˆ°çš„documentéƒ½éœ€è¦æ›´æ–°UI(æ¢ä¸ªè¯´æ³•å°±æ˜¯åªæœ‰ä»ŽUI Renderæ”¶ç›Šçš„documnetæ‰éœ€è¦æ›´æ–°)ï¼Œæµè§ˆå™¨ä¼šåˆ¤æ–­è¿™ä¸ªdocumentæ˜¯å¦ä¼šä»ŽUI Renderä¸­èŽ·ç›Šï¼Œå› ä¸ºæµè§ˆå™¨åªéœ€è¦ä¿æŒ60Hzçš„åˆ·æ–°çŽ‡å³å¯ï¼Œè€Œæ¯è½®event loopéƒ½æ˜¯éžå¸¸å¿«çš„ï¼Œæ‰€ä»¥æ²¡å¿…è¦æ¯ä¸ªdocumentéƒ½Render UIã€‚7.5å’Œ7.6 run the resize steps/run the scroll stepsä¸æ˜¯è¯´åŽ»æ‰§è¡Œresizeå’Œscrollã€‚æ¯æ¬¡æˆ‘ä»¬scollçš„æ—¶å€™è§†å£æˆ–è€…domå°±å·²ç»ç«‹å³scrolläº†ï¼Œå¹¶æŠŠdocumentæˆ–è€…domåŠ å…¥åˆ° pending scroll event targetsä¸­ï¼Œè€Œrun the scroll stepså…·ä½“åšçš„åˆ™æ˜¯éåŽ†è¿™äº›targetï¼Œåœ¨targetä¸Šè§¦å‘scrolläº‹ä»¶ã€‚run the resize stepsä¹Ÿæ˜¯ç›¸ä¼¼çš„ï¼Œè¿™ä¸ªæ­¥éª¤æ˜¯è§¦å‘resizeäº‹ä»¶ã€‚7.8å’Œ7.9 åŽç»­çš„media query, run CSS animations and send eventsç­‰ç­‰ä¹Ÿæ˜¯ç›¸ä¼¼çš„ï¼Œéƒ½æ˜¯è§¦å‘äº‹ä»¶ï¼Œç¬¬10æ­¥å’Œç¬¬11æ­¥åˆ™æ˜¯æ‰§è¡Œæˆ‘ä»¬ç†Ÿæ‚‰çš„requestAnimationFrameå›žè°ƒå’ŒIntersectionObserverå›žè°ƒï¼ˆç¬¬åæ­¥è¿˜æ˜¯æŒºå…³é”®çš„,rafå°±æ˜¯åœ¨è¿™æ‰§è¡Œçš„ï¼ï¼‰ã€‚7.12 æ¸²æŸ“UIï¼Œå…³é”®å°±åœ¨è¿™äº†ã€‚ç¬¬ä¹æ­¥ ç»§ç»­æ‰§è¡Œevent loopï¼ŒåˆåŽ»æ‰§è¡Œtaskï¼Œmicrotaskså’ŒUI renderã€‚ ä¸ªäººç†è§£æ˜¯åœ¨event loopè¿‡ç¨‹ä¸­ï¼Œä¼šå¾ªçŽ¯æ£€æµ‹å„ä¸ªtaské˜Ÿåˆ—ä¸­çš„taskï¼ŒèŽ·å–åœç•™æ—¶é—´æœ€ä¹…çš„taskï¼Œå‡ºé˜Ÿå¹¶å°†ä¹‹æ‰§è¡Œã€‚åœ¨æ‰§è¡Œå®ŒåŽï¼Œä¼šåŽ»æ£€æµ‹microTaské˜Ÿåˆ—å¹¶æ‰§è¡Œåœ¨è¿™ä¸ªtaskè¿‡ç¨‹ä¸­ç”Ÿæˆçš„microTaskä»¥åŠmicorTaskæ‰§è¡Œè¿‡ç¨‹ä¸­ç”ŸæˆmicroTaskï¼Œåœ¨æ‰§è¡Œå®ŒæˆåŽè¿›è¡Œé¡µé¢çš„æ›´æ–°æ“ä½œã€‚è¿™é‡Œä¸¾ä¸ªðŸŒ°ï¼š1234567console.log(&apos;script start&apos;)setTimeout(() =&gt; console.log(&apos;setTimeout&apos;), 0)Promise.resolve().then(() =&gt; console.log(&apos;Promise1&apos;)).then(() =&gt; console.log(&apos;Promise2&apos;))console.log(&apos;script end&apos;) æ‰§è¡Œç»“æžœå¦‚ä¸‹12345script startscript endPromise1Promise2setTimeout æµè§ˆå™¨é¦–å…ˆæ‰§è¡Œçš„æ˜¯scriptè§£æžçš„taskï¼Œæ‰€ä»¥æœ€å…ˆæ‰“å°çš„æ˜¯åœ¨è¿™ä¸ªtaskä¸­æ‰§è¡Œçš„console.logï¼Œç„¶åŽåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼ŒPromiseä¼šç”Ÿæˆäº†ä¸€ä¸ªmicroTaskå¹¶å°†å…¶åŠ å…¥microTaské˜Ÿåˆ—ä¸­ï¼ŒsetTimeoutä¼šç”Ÿæˆä¸€ä¸ªtaskå¹¶å°†å…¶åŠ å…¥taské˜Ÿåˆ—ä¸­ã€‚åœ¨æ‰§è¡Œå®Œscriptè§£æžè¿™ä¸ªtaskåŽï¼Œä¼šåŽ»æ£€æµ‹microTaské˜Ÿåˆ—ï¼Œæ­¤æ—¶microtaské˜Ÿåˆ—ä¸­å­˜åœ¨ä¸€ä¸ªç”±Promiseç”Ÿæˆçš„microTaskä»»åŠ¡ï¼Œå°†å…¶æ‰§è¡ŒåŽå…¶è¿”å›žç»“æžœåˆæ‰§è¡Œthenï¼Œå› æ­¤æœ‰ç”Ÿæˆä¸€ä¸ªmicroTaskï¼Œå°†å…¶åŠ å…¥åˆ°microTaské˜Ÿåˆ—ä¸­ï¼Œæ‰§è¡Œå®ŒæˆåŽç»§ç»­å°†microTaské˜Ÿåˆ—æ‰§è¡Œå®Œæˆã€‚åœ¨microTaské˜Ÿåˆ—æ‰§è¡Œå®ŒæˆåŽç»§ç»­æ£€æµ‹taské˜Ÿåˆ—ï¼Œæ­¤æ—¶å­˜åœ¨ä¸€ä¸ªsetTimeoutç”Ÿæˆçš„taskï¼Œå°†å…¶å®ŒæˆåŽæœ€ç»ˆç»“æžœå°±å¦‚ä¸Šæ‰€ç¤ºã€‚ å‚è€ƒèµ„æ–™ Vueæºç è¯¦è§£ä¹‹nextTickï¼šMutationObserveråªæ˜¯æµ®äº‘ï¼Œmicrotaskæ‰æ˜¯æ ¸å¿ƒï¼ Tasks, microtasks, queues and schedules æ·±å…¥æŽ¢ç©¶ eventloop ä¸Žæµè§ˆå™¨æ¸²æŸ“çš„æ—¶åºé—®é¢˜ - 404Forest]]></content>
      <categories>
        <category>ç¬”è®°</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
        <tag>ç¬”è®°</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[åŒå‘æ•°æ®ç»‘å®šçš„å®žçŽ°]]></title>
    <url>%2F2017%2F10%2F26%2F%E5%8F%8C%E5%90%91%E6%95%B0%E6%8D%AE%E7%BB%91%E5%AE%9A%E7%9A%84%E5%AE%9E%E7%8E%B0%2F</url>
    <content type="text"><![CDATA[æ¨¡ä»¿vueçš„åŒå‘æ•°æ®ç»‘å®š å‰æ®µæ—¶é—´å¬äº†TGideasçš„ä¸€åœºäº¤æµä¼šä¹‹åŽèŒç”Ÿäº†è‡ªå·±å®žçŽ°æ•°æ®åŒå‘ç»‘å®šçš„æƒ³æ³•ï¼ŒäºŽæ˜¯åœ¨å‚è€ƒäº†DMQ/mvvm: å‰–æžvueå®žçŽ°åŽŸç†ï¼Œè‡ªå·±åŠ¨æ‰‹å®žçŽ°mvvmçš„é€»è¾‘åŽç”¨TypeScriptå®žçŽ°äº†ä¸€å¥—ç®€å•çš„åŒå‘æ•°æ®ç»‘å®šçš„åº“é¡¹ç›®åœ°å€åœ¨è¿™å­¦ä¹ vueçš„åŒå‘æ•°æ®ç»‘å®š é¡¹ç›®ä¸»è¦ä»£ç ç›®å½•å¦‚ä¸‹123456789101112src|--Yue|--|--util|--|--|--CompileUtil.ts|--|--|--Updater.ts|--|--Yue.ts|--|--Observer.ts|--|--Compile.ts|--|--Observer.ts|--|--Dep.ts|--|--Watcher.ts|--index.ts æ•´ä¸ªé¡¹ç›®é€šè¿‡srcç›®å½•ä¸‹çš„index.tså¯¹å¤–æš´éœ²å¼•ç”¨ï¼Œä¸»ä½“ç±»æ˜¯Yueç›®å½•ä¸‹çš„Yue.tsã€‚åŒæ—¶Yueç±»ä¸‹é¢è¿˜æœ‰Observer.tsä»¥åŠCompile.tsä¸¤ä¸ªä¸»è¦ç±»ã€‚Observerç±»æ˜¯ç”¨æ¥å»ºç«‹Yueå®žä¾‹åŒ–åŽå¯¹è±¡ä¸‹çš„dataæ•°æ®çš„ç›‘æµ‹ï¼ŒCompileç±»æ˜¯è´Ÿè´£å°†è‡ªå®šä¹‰çš„ä¸€å¥—htmlè¯­æ³•ç³–ç¼–è¯‘æˆæµè§ˆå™¨æ‰€èƒ½ç†è§£çš„domæ ‘utilç›®å½•ä¸‹å­˜æ”¾ç€CompileUtilä»¥åŠUpdaterä¸¤ä¸ªå·¥å…·ç±»ï¼ŒCompileUtilç±»æ˜¯ç¼–è¯‘å·¥å…·ç±»ï¼ŒUpdateræ˜¯æ•°æ®æ›´æ–°å·¥å…·ç±» åŒå‘æ•°æ®ç»‘å®šçš„å®žçŽ°é€»è¾‘ å…·ä½“é€»è¾‘å¯ä»¥å‚è€ƒDMQ/mvvm: å‰–æžvueå®žçŽ°åŽŸç†ï¼Œè‡ªå·±åŠ¨æ‰‹å®žçŽ°mvvmè¿™ç¯‡æ‰€è®²çš„ï¼Œæˆ‘åªæ˜¯å¤§æ¦‚è®²ä¸€ä¸‹å…³äºŽè‡ªå·±çš„ç†è§£ã€‚ å»ºç«‹å¯¹æ•°æ®çš„ç›‘æµ‹ã€‚åœ¨Observerè¿™ä¸ªç±»ä¸­ä½¿ç”¨Object.definePropertyæ–¹æ³•é‡æ–°å®šä¹‰dataä¸Šçš„æ•°æ®ï¼Œå®žçŽ°å¯¹dataçš„æ•°æ®åŠ«æŒã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ä¸ºæ¯ä¸ªå±žæ€§èŠ‚ç‚¹å»ºç«‹ä¸€ä¸ªå‘å¸ƒè€…ï¼Œè¿™ä¸ªå‘å¸ƒè€…æ˜¯é’ˆå¯¹å¯¹åº”çš„å±žæ€§èŠ‚ç‚¹ä»¥åŠå…¶åŽä»£å±žæ€§çš„ã€‚ æ¨¡ç‰ˆçš„è½¬æ¢ã€‚ æ¨¡ç‰ˆçš„èŽ·å–ã€‚é€šè¿‡document.createDocumentFragmentæ–¹æ³•åˆ›å»ºä¸€ä¸ªæ–‡æ¡£ç¢Žç‰‡ï¼Œå¹¶é€šè¿‡appendChildæ–¹æ³•å°†ç¼–è¯‘èŒƒå›´å†…çš„dom&gt;ä»Žæ–‡æ¡£æ ‘ä¸­ç§»é™¤å¹¶åŠ å…¥åˆ°æ–‡æ¡£ç¢Žç‰‡ä¸­ã€‚ æ¨¡ç‰ˆçš„ç¼–è¯‘ã€‚é€šè¿‡node.childNodesé€’å½’éåŽ†æ¯ä¸ªdomèŠ‚ç‚¹ï¼Œä½¿ç”¨æ­£åˆ™åŒ¹é…åˆ¤æ–­æ¯ä¸ªèŠ‚ç‚¹æ˜¯å¦å­˜åœ¨éœ€è¦ç¼–è¯‘çš„æ–‡æœ¬ï¼Œè‹¥å­˜åœ¨ï¼Œåˆ™å°†å…¶è·Ÿdataä¸Šçš„æ•°æ®è¿›è¡ŒåŒ¹é…ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªè®¢é˜…è€…å°†å…¶åŠ å…¥åˆ°ç›¸åº”çš„å‘å¸ƒè€…ä¸­ã€‚ é€šè¿‡åœ¨æ•°æ®ç›‘æµ‹ä»¥åŠdomæ•°æ®ç»‘å®šçš„è¿‡ç¨‹æž„å»ºå‘å¸ƒ-è®¢é˜…çš„è®¾è®¡æ¨¡å¼ï¼Œå®žçŽ°äº†åŒå‘æ•°æ®ç»‘å®š å­˜åœ¨çš„é—®é¢˜ åœ¨ç¼–è¯‘æ¨¡ç‰ˆä¸­å¤šæ¬¡å¼•ç”¨åŒä¸ªdataä¸Šçš„æ•°æ®ä¼šå¯¼è‡´é‡å¤çš„Watcheråˆ›å»ºã€‚ ä¸Šè¿°é—®é¢˜ä»¥åŽä¼šç»§ç»­ç ”ç©¶ï¼Œå¾…ç»­â€¦]]></content>
      <categories>
        <category>ç¬”è®°</category>
      </categories>
      <tags>
        <tag>Vue</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Hello World]]></title>
    <url>%2F2017%2F10%2F26%2Fhello-world%2F</url>
    <content type="text"><![CDATA[Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new "My New Post" More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment]]></content>
      <categories>
        <category>ç¬”è®°</category>
      </categories>
      <tags>
        <tag>ç¬”è®°</tag>
      </tags>
  </entry>
</search>
