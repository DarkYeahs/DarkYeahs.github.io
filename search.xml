<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[ç¼“å­˜æ•´ç†]]></title>
    <url>%2F2019%2F04%2F25%2F%E7%BC%93%E5%AD%98%E6%95%B4%E7%90%86%2F</url>
    <content type="text"><![CDATA[æ•´ç†ä¸‹å…³äºŽæµè§ˆå™¨è¯·æ±‚ç¼“å­˜æµè§ˆå™¨è¯·æ±‚ç¼“å­˜åˆ†ä¸ºå¼ºç¼“å­˜ä¸Žåå•†ç¼“å­˜ å¼ºç¼“å­˜æµè§ˆå™¨è®¿é—®èµ„æºå‰ä¼šå…ˆæ£€æŸ¥æœ¬åœ°æ˜¯å¦è¯·æ±‚è¿‡è¯¥èµ„æºï¼Œå¦‚æžœè¯·æ±‚è¿‡è¯¥èµ„æºï¼Œä¼šå…ˆåˆ¤æ–­è¯¥èµ„æºä¸Šä¸€æ¬¡è¯·æ±‚çš„expireså­—æ®µä»¥åŠcache-controlå­—æ®µã€‚å¦‚æžœå­˜åœ¨expireså­—æ®µä»¥åŠcache-controlå­—æ®µï¼Œä¼šåˆ¤æ–­å½“å‰æ˜¯å¦è¿‡æœŸï¼Œå¦‚æžœè¿‡æœŸï¼Œåˆ™ä¼šå‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚ï¼Œå¦‚æžœæœªè¿‡æœŸï¼Œåˆ™ä¸ä¼šå‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚ï¼Œç›´æŽ¥ä½¿ç”¨æœ¬åœ°ç¼“å­˜ã€‚ å¼ºç¼“å­˜è¿˜åˆ†from dist cacheä»¥åŠfrom memory cacheï¼Œfrom dist cacheå­—é¢ä¸ŠæŒ‡çš„æ˜¯ä»Žç¡¬ç›˜é‡Œè¯»å–ç¼“å­˜ï¼Œfrom memory cacheæŒ‡çš„æ˜¯ä»Žç¼“å­˜ä¸­è¯»å–ï¼Œå¦‚æžœæµè§ˆå™¨å…³é—­ï¼Œfrom memory cacheä¼šç›´æŽ¥è¿›è¡Œæ¸…é™¤ã€‚ å¼ºç¼“å­˜çš„çŠ¶æ€ç æ˜¯200 åå•†ç¼“å­˜åœ¨å½“å‰å¼ºç¼“å­˜è¿‡æœŸçš„æƒ…å†µä¸‹ï¼Œä¼šå‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚ï¼Œåœ¨å‘èµ·çš„è¯·æ±‚å¤´ä¸Šä¼šå¸¦ä¸ŠETagå­—æ®µæˆ–è€…last modifyå­—æ®µï¼ŒæœåŠ¡å™¨ä¼šä¼˜å…ˆæ ¡éªŒè¯·æ±‚å¤´çš„ETagå­—æ®µä¸ŽæœåŠ¡å™¨ä¸Šæ–‡ä»¶çš„å­—æ®µæ˜¯å¦ä¸€è‡´ï¼Œä¸€è‡´åˆ™è¿”å›ž304å“åº”ç å¹¶åœ¨è¿”å›žçš„è¯·æ±‚å¤´ä¸Šå¸¦ä¸ŠIf-not-matchå­—æ®µï¼Œå‘Šè¯‰æµè§ˆå™¨ä½¿ç”¨æœ¬åœ°ç¼“å­˜ã€‚å¦‚æžœæ²¡æœ‰ETagå­—æ®µï¼Œåˆ™ä¼šæ ¡éªŒè¯·æ±‚å¤´ä¸­çš„Last-Modifyå­—æ®µï¼Œä¸ŽæœåŠ¡å™¨æ–‡ä»¶ä¸Šæœ€åŽä¸€æ¬¡ä¿®æ”¹æ—¶é—´è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æžœä¸€è‡´åˆ™è¿”å›ž304å¹¶åœ¨è¿”å›žçš„è¯·æ±‚å¤´ä¸Šå¸¦ä¸ŠIf-modify-matchï¼Œæµè§ˆå™¨ä½¿ç”¨æœ¬åœ°ç¼“å­˜ã€‚å¦‚æžœä¸¤è€…æ ¡éªŒéƒ½ä¸é€šè¿‡ï¼Œåˆ™è¿”å›ž200çŠ¶æ€ç ï¼Œæµè§ˆå™¨ä»ŽæœåŠ¡å™¨åŠ è½½èµ„æºã€‚ åå•†ç¼“å­˜æ ¡éªŒè¿‡ç¨‹ä¸­ï¼ŒETag/If-not-matchä»¥åŠlast-modify/if-modify-sinceæ˜¯é…å¥—æ ¡éªŒçš„ï¼Œå¹¶ä¸”ETag/If-not-matchçš„ä¼˜å…ˆçº§æ¯”last-modify/if-modify-sinceä¼˜å…ˆçº§é«˜ï¼Œå› ä¸ºæœåŠ¡å™¨æ ¡éªŒçš„æ—¶é—´ç²¾åº¦å¯èƒ½ä¸å‡†ç¡®ä»¥åŠæ–‡ä»¶å†…å®¹æœªä¿®æ”¹ä½†æ–‡ä»¶ä¿®æ”¹æ—¶é—´æœªå‘ç”Ÿå˜åŒ–ç­‰ã€‚]]></content>
      <categories>
        <category>ç¬”è®°</category>
      </categories>
      <tags>
        <tag>Javascript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è¿‘æœŸé—®é¢˜æ±‡æ€»]]></title>
    <url>%2F2019%2F04%2F25%2F%E8%BF%91%E6%9C%9F%E5%85%BC%E5%AE%B9%E8%A1%8C%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB%2F</url>
    <content type="text"><![CDATA[æ•´ç†ä¸‹è¿‘æœŸå·¥ä½œä¸­é‡åˆ°çš„é—®é¢˜ å®‰å“remå…¼å®¹é—®é¢˜ åœ¨éƒ¨åˆ†å®‰å“æœºåž‹é‡Œå­˜åœ¨1remä¸ç­‰äºŽæ ¹å…ƒç´ ä¸Šå­—ä½“å¤§å°çš„é—®é¢˜ã€‚ç†è®ºä¸Šå¦‚æžœè®¾å®šæ ¹å…ƒç´ å¤§å°ä¸º16pxï¼Œé‚£ä¹ˆ1remåº”è¯¥å°±ç­‰äºŽ16pxï¼Œä½†æ˜¯åœ¨éƒ¨åˆ†å®‰å“æœºåž‹ï¼ˆå¸¸è§vivoï¼Œoppoæœºåž‹ï¼‰ä¸­ä¼šå‡ºçŽ°1remä¸ç­‰äºŽ16pxçš„çŽ°è±¡ã€‚æ­¤æ—¶å¯ä»¥æ ¹æ®æ ¹å…ƒç´ çš„å­—ä½“å¤§å°è®¾å®šä¸€ä¸ªdomå…ƒç´ æ’å…¥æ–‡æ¡£ï¼Œé€šè¿‡è°ƒç”¨domå…ƒç´ ä¸Šçš„getBoundingClientRectèŽ·å–å…ƒç´ åœ¨domæ–‡æ¡£ä¸­å®žé™…çš„å¤§å°ï¼Œé€šè¿‡ç†è®ºçš„æ•°å€¼ä¸ŽçœŸå®žçš„æ•°å€¼è¿›è¡Œåˆ¤æ–­ã€‚å¦‚æžœä¸¤ä¸ªæ•°å€¼ä¸ç­‰ï¼Œåˆ™å°†æ ¹å…ƒç´ ä¸Šçš„å­—ä½“å¤§å°æŒ‰ç…§ç†è®ºæ•°å€¼ä¸ŽçœŸå®žæ•°å€¼çš„æ¯”ä¾‹æ”¾å¤§æˆ–è€…ç¼©å°ã€‚ å¦‚æžœä½¿ç”¨remè¿›è¡Œå¸ƒå±€ï¼Œé‚£ä¹ˆä¼šç»å¸¸å‡ºçŽ°è®¡ç®—å‡ºæ¥çš„å…ƒç´ å¤§å°åƒç´ å­˜åœ¨å°æ•°ç‚¹ï¼Œè€Œæµè§ˆå™¨æ¸²æŸ“é¡µé¢æ˜¯æŒ‰ç…§å±å¹•çš„æ¸²æŸ“å•ä½è¿›è¡Œæ¸²æŸ“çš„ï¼Œè¿™ç§æƒ…å†µä¸‹æ— æ³•é¿å…ï¼Œåªèƒ½åœ¨å¸ƒå±€ä¸­è¿›è¡Œç•™æ„ã€‚ placeholderå­—ä½“å‘ç”Ÿå˜åŒ–ä¼šå¯¼è‡´placeholderå­—ä½“å‘ç”Ÿä½ç§»é€šè¿‡è®¾å®š::-webkit-input-placeholderå¯¹inputä¸‹çš„placeholderå±žæ€§è®¾å®šçš„é¢„ç•™å­—ä½“è¿›è¡ŒåŠ ç²—å˜åŒ–å­—ä½“ç±»åž‹ä¼šå¯¼è‡´placeholderè®¾å®šçš„å­—ä½“åœ¨å°ç±³æ‰‹æœºä¸Šå‘ç”Ÿä½ç§» åŽä¸º åŽä¸ºä¸æ”¯æŒå¤šè¡Œflexå¸ƒå±€ã€‚åŽä¸ºæœºåž‹ä¸æ”¯æŒå¤šè¡Œflexå¸ƒå±€ï¼Œå› ä¸ºå¤§å¤šæ•°åŽä¸ºæœºåž‹åªæ”¯æŒå¤è€çš„flex-boxå¸ƒå±€ï¼Œflex-boxä¸æ”¯æŒå¤šè¡Œå¸ƒå±€ï¼Œåªæ”¯æŒå•è¡Œçš„flexå¸ƒå±€ã€‚æ‰€ä»¥åœ¨é€‰å®šå¤šè¡Œå¸ƒå±€çš„æ—¶å€™ï¼Œå¯¹flexçš„ä½¿ç”¨è¦å¤šåŠ è°¨æ…Žï¼Œä¸”å¯¹flexçš„é¢„ç¼–è¯‘è¦é€‰å®šå…¼å®¹åˆ°æœ€è€çš„é‚£ä¸€ä¸ªé€‰é¡¹ã€‚ è™½ç„¶åœ¨ç§»åŠ¨ç«¯ä½¿ç”¨transformä»¥åŠè®¾å®štranslate3Då¯ä»¥å¼€å¯ç¡¬ä»¶åŠ é€Ÿï¼Œä½†æ˜¯è¦è€ƒè™‘åœ¨éƒ¨åˆ†æœºåž‹ä½¿ç”¨åŽé¡µé¢æ»‘åŠ¨å…ƒç´ æ»šåŠ¨æ€ªå¼‚çš„é—®é¢˜ï¼Œå¸¸è§äºŽé¡µé¢å‘ç”Ÿæ»‘åŠ¨ï¼Œä½¿ç”¨äº†transformå±žæ€§çš„å…ƒç´ ä¼šæ»žåŽæ»‘åŠ¨ï¼ˆä¸åŒæ­¥æ»‘åŠ¨ï¼‰å¤šæ•°å®‰å“æµè§ˆå™¨æ’­æ”¾è§†é¢‘ä¼šä½¿ç”¨è‡ªèº«çš„æµè§ˆå™¨ï¼Œä¸”æµè§ˆå™¨æ— æ³•è¢«é®ç›– ios vueä»¥åŠreactåŽé€€ä¼šå¯¼è‡´é¡µé¢ç©ºç™½ iosä¸‹å…ƒç´ éœ€è¦ä½¿ç”¨onstarttouchå±žæ€§æ‰èƒ½æ¿€æ´»å…ƒç´ çš„activeæ¸²æŸ“ iphoneXåœ¨safariæµè§ˆå™¨æ¨ªå±ä¸‹ä¸¤è¾¹ä¼šè‡ªåŠ¨ç•™ç™½å·¥å…· ä½¿ç”¨webpackæ‰“åŒ…æ—¶å¦‚æžœwebpackçš„é…ç½®ä¸­output.jsonpfunctioné…ç½®é‡å¤ä¼šå¯¼è‡´æ‰“åŒ…èµ„æºå‘ç”Ÿå†²çª offline-plugin ç¦»çº¿èµ„æºåŠ è½½ä¼˜åŒ–ï¼ŒäºŒæ¬¡åŠ è½½çš„æ—¶é—´å¯ä»¥ä¼˜åŒ–åˆ°åªéœ€è¦åŽŸå…ˆåŠ è½½æ—¶é—´çš„1/3ï¼Œä½†ä½¿ç”¨ä¼šå¯¼è‡´qqåˆ†äº«å¤±è´¥ï¼Œå½±å“åˆ°qqçš„åˆ†äº«æŽ¥å£çš„apiæŠ¥é”™ï¼ˆé—®é¢˜æš‚æ—¶æœªçŸ¥ï¼‰]]></content>
      <categories>
        <category>ç¬”è®°</category>
      </categories>
      <tags>
        <tag>ç¬”è®°</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JavaScriptæ‰§è¡Œä¸Šä¸‹æ–‡çŸ¥è¯†æ•´ç†]]></title>
    <url>%2F2017%2F11%2F02%2FJavaScript%E6%89%A7%E8%A1%8C%E4%B8%8A%E4%B8%8B%E6%96%87%E7%9F%A5%E8%AF%86%E6%95%B4%E7%90%86%2F</url>
    <content type="text"><![CDATA[å‰å‡ å¤©åœ¨GitHubä¸Šçœ‹åˆ°äº†mqyqingfengçš„åšå®¢ï¼Œåœ¨ä¸Šé¢çœ‹äº†ä»–çš„JavaScriptæ·±å…¥ç³»åˆ—ä¸­å…³äºŽæ‰§è¡Œä¸Šä¸‹æ–‡éƒ¨åˆ†çš„è®²è¿°ï¼Œå¯¹äºŽJavaScriptçš„æ‰§è¡Œä¸Šä¸‹æ–‡æœ‰äº†è¿›ä¸€æ­¥çš„äº†è§£,åœ¨è¿™é‡Œæ€»ç»“ä¸‹æˆ‘æ–°çš„è®¤è¯†ã€‚ æ‰§è¡Œä¸Šä¸‹æ–‡é¦–å…ˆè¯´ä¸‹ä»€ä¹ˆæ˜¯æ‰§è¡Œä¸Šä¸‹æ–‡ï¼ŒHTMLè§„èŒƒä¸Šæ˜¯è¿™ä¹ˆè¯´çš„ When control is transferred to ECMAScript executable code, control is entering an execution context. Active execution contexts logically form a stack. The top execution context on this logical stack is the running execution context. A new execution context is created whenever control is transferred from the executable code associated with the currently running execution context to executable code that is not associated with that execution context. The newly created execution context is pushed onto the stack and becomes the running execution context. ç®€å•çš„æ¥è¯´å°±æ˜¯å½“å¯æ‰§è¡Œä»£ç è¢«æ‰§è¡Œçš„æ—¶å€™ï¼Œä¼šåˆ›å»ºä¸€ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œè¿™ä¸ªä¸Šä¸‹æ–‡å°±æ˜¯å½“å‰å¯æ‰§è¡Œä»£ç çš„æ‰§è¡ŒçŽ¯å¢ƒã€‚å¹¶ä¸”å¤šä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡ä¼šæž„æˆä¸€ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡æ ˆï¼Œæ ˆåº•éƒ¨å§‹ç»ˆå­˜åœ¨ç€ä¸€ä¸ªGlobalContextã€‚å…¶ä¸­å¯æ‰§è¡Œä»£ç åˆ†ä¸º1. å…¨å±€ä»£ç ;2. å‡½æ•°ä»£ç ;3. evalä»£ç ã€‚ å¯¹äºŽæ¯ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œéƒ½æœ‰ä¸‰ä¸ªé‡è¦å±žæ€§ï¼š å˜é‡å¯¹è±¡(Variable objectï¼ŒVO) ä½œç”¨åŸŸé“¾(Scope chain) this å˜é‡å¯¹è±¡å˜é‡å¯¹è±¡æ˜¯ä¸Žæ‰§è¡Œä¸Šä¸‹æ–‡ç›¸å…³çš„æ•°æ®ä½œç”¨åŸŸï¼Œå­˜å‚¨äº†åœ¨ä¸Šä¸‹æ–‡ä¸­å®šä¹‰çš„å˜é‡å’Œå‡½æ•°å£°æ˜Žã€‚å…¶ä¸­ï¼Œåœ¨å‡½æ•°ä¸Šä¸‹æ–‡ä¸­ï¼Œæˆ‘ä»¬ç”¨æ´»åŠ¨å¯¹è±¡(activation object, AO)æ¥è¡¨ç¤ºå˜é‡å¯¹è±¡ã€‚ æ´»åŠ¨å¯¹è±¡å’Œå˜é‡å¯¹è±¡å…¶å®žæ˜¯ä¸€ä¸ªä¸œè¥¿ï¼Œåªæ˜¯å˜é‡å¯¹è±¡æ˜¯è§„èŒƒä¸Šçš„æˆ–è€…è¯´æ˜¯å¼•æ“Žå®žçŽ°ä¸Šçš„ï¼Œä¸å¯åœ¨ JavaScript çŽ¯å¢ƒä¸­è®¿é—®ï¼Œåªæœ‰åˆ°å½“è¿›å…¥ä¸€ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡ä¸­ï¼Œè¿™ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡æ‰ä¼šè¢«æ¿€æ´»ï¼Œæ‰€ä»¥æ‰å« activation objectï¼Œè€Œåªæœ‰è¢«æ¿€æ´»çš„å˜é‡å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯æ´»åŠ¨å¯¹è±¡ä¸Šçš„å„ç§å±žæ€§æ‰èƒ½è¢«è®¿é—®ã€‚ æ´»åŠ¨å¯¹è±¡æ˜¯åœ¨è¿›å…¥å‡½æ•°ä¸Šä¸‹æ–‡æ—¶åˆ»è¢«åˆ›å»ºçš„ï¼Œå®ƒé€šè¿‡å‡½æ•°çš„ arguments å±žæ€§åˆå§‹åŒ–ã€‚arguments å±žæ€§å€¼æ˜¯ Arguments å¯¹è±¡ã€‚ æ‰§è¡Œä¸Šä¸‹æ–‡çš„ä»£ç ä¼šåˆ†æˆä¸¤ä¸ªé˜¶æ®µè¿›è¡Œå¤„ç†ï¼šåˆ†æžå’Œæ‰§è¡Œã€‚ åˆ†æžå½“è¿›å…¥æ‰§è¡Œä¸Šä¸‹æ–‡æ—¶ï¼Œè¿™æ—¶å€™åªæ˜¯è¿›è¡Œä»£ç çš„è§£æž(å˜é‡å‘½åçš„æå‡å°±åœ¨è¿™ä¸€é˜¶æ®µ)ï¼Œå˜é‡å¯¹è±¡ä¼šåŒ…æ‹¬ï¼ša) å‡½æ•°çš„æ‰€æœ‰å½¢å‚ (å¦‚æžœæ˜¯å‡½æ•°ä¸Šä¸‹æ–‡) ç”±åç§°å’Œå¯¹åº”å€¼ç»„æˆçš„ä¸€ä¸ªå˜é‡å¯¹è±¡çš„å±žæ€§è¢«åˆ›å»º æ²¡æœ‰å®žå‚ï¼Œå±žæ€§å€¼è®¾ä¸º undefined b) å‡½æ•°å£°æ˜Ž ç”±åç§°å’Œå¯¹åº”å€¼ï¼ˆå‡½æ•°å¯¹è±¡(function-object)ï¼‰ç»„æˆä¸€ä¸ªå˜é‡å¯¹è±¡çš„å±žæ€§è¢«åˆ›å»º å¦‚æžœå˜é‡å¯¹è±¡å·²ç»å­˜åœ¨ç›¸åŒåç§°çš„å±žæ€§ï¼Œåˆ™å®Œå…¨æ›¿æ¢è¿™ä¸ªå±žæ€§ c) å˜é‡å£°æ˜Ž ç”±åç§°å’Œå¯¹åº”å€¼ï¼ˆundefinedï¼‰ç»„æˆä¸€ä¸ªå˜é‡å¯¹è±¡çš„å±žæ€§è¢«åˆ›å»ºï¼› å¦‚æžœå˜é‡åç§°è·Ÿå·²ç»å£°æ˜Žçš„å½¢å¼å‚æ•°æˆ–å‡½æ•°ç›¸åŒï¼Œåˆ™å˜é‡å£°æ˜Žä¸ä¼šå¹²æ‰°å·²ç»å­˜åœ¨çš„è¿™ç±»å±žæ€§ æ‰§è¡Œåœ¨æ‰§è¡Œé˜¶æ®µï¼Œæµè§ˆå™¨ä¼šé¡ºåºæ‰§è¡Œä»£ç ï¼Œæ ¹æ®ä»£ç ï¼Œä¿®æ”¹å˜é‡å¯¹è±¡çš„å€¼ ä¸¾ä¸ªðŸŒ°ï¼š12345678function foo (a) &#123; var b = 1 function bar () &#123; &#125; var d = function () &#123;&#125; b = 2&#125;foo(1) åœ¨åˆ†æžé˜¶æ®µï¼Œè¿™ä¸ªæ—¶å€™çš„AOæ˜¯ï¼š12345678910AO = &#123; arguments: &#123; 0: 1, length: 1 &#125;, a: 1, b: undefined, bar: reference to function c()&#123;&#125;, d: undefined&#125; åœ¨æ‰§è¡Œé˜¶æ®µï¼Œè¿™ä¸ªæ—¶å€™çš„AOæ˜¯ï¼š12345678910AO = &#123; arguments: &#123; 0: 1, length: 1 &#125;, a: 1, b: 2, bar: reference to function c()&#123;&#125;, d: reference to FunctionExpression "d"&#125; ä½œç”¨åŸŸé“¾åœ¨ä¸Šé¢è¯´åˆ°æ¯ä¸ªä¸Šä¸‹æ–‡éƒ½æœ‰ä¸€ä¸ªå˜é‡å¯¹è±¡ï¼Œè€Œç”±å¤šä¸ªä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡æž„æˆçš„é“¾è¡¨å°±å«åšä½œç”¨åŸŸé“¾ã€‚å…¶ä¸­ï¼Œå‡½æ•°çš„ä½œç”¨åŸŸé“¾åœ¨å‡½æ•°å®šä¹‰çš„æ—¶å€™å°±å†³å®šäº†ã€‚åœ¨å‡½æ•°åˆ›å»ºçš„æ—¶å€™ï¼Œä¼šæŠŠæ‰€æœ‰çš„çˆ¶å˜é‡å¯¹è±¡ä¿å­˜åˆ°å‡½æ•°çš„ä¸€ä¸ªå†…éƒ¨å±žæ€§ä¸­ã€‚ä¸¾ä¸ªðŸŒ°ï¼š12345function foo() &#123; function bar() &#123; ... &#125;&#125; å‡½æ•°åˆ›å»ºæ—¶ï¼Œå„è‡ªçš„[[scope]]ä¸ºï¼š12345678foo.[[scope]] = [ globalContext.VO];bar.[[scope]] = [ fooContext.AO, globalContext.VO]; å½“å‡½æ•°æ¿€æ´»æ—¶ï¼Œè¿›å…¥å‡½æ•°ä¸Šä¸‹æ–‡ï¼Œåˆ›å»º VO/AO åŽï¼Œå°±ä¼šå°†æ´»åŠ¨å¯¹è±¡æ·»åŠ åˆ°ä½œç”¨é“¾çš„å‰ç«¯ã€‚ è¿™æ—¶å€™æ‰§è¡Œä¸Šä¸‹æ–‡çš„ä½œç”¨åŸŸé“¾ï¼Œæˆ‘ä»¬å‘½åä¸º Scopeï¼š 1Scope = [AO].concat([[Scope]]); è‡³æ­¤ï¼Œä½œç”¨åŸŸé“¾åˆ›å»ºå®Œæ¯•ã€‚ thiså†è¿™é‡Œå°±å…ˆä¸å±•å¼€äº†ï¼Œå•çº¯ä»ŽECMAScriptçš„è§’åº¦è®²æœ‰ç‚¹ç»•ï¼Œä¹Ÿæœ‰ç‚¹å¤šã€‚ã€‚ã€‚æ‡’ç—…åˆçŠ¯äº†ã€‚ã€‚ã€‚]]></content>
      <categories>
        <category>ç¬”è®°</category>
      </categories>
      <tags>
        <tag>ç¬”è®°</tag>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å…³äºŽä¸€é“jsé¢˜ç›®çš„çŒœæƒ³]]></title>
    <url>%2F2017%2F10%2F31%2F%E5%85%B3%E4%BA%8E%E4%B8%80%E9%81%93js%E9%A2%98%E7%9B%AE%E7%9A%84%E7%8C%9C%E6%83%B3%2F</url>
    <content type="text"><![CDATA[æ˜¨å¤©åœ¨GitHubä¸Šæ— æ„é€›åˆ°äº†creeperyangçš„åšå®¢,åœ¨ä»–åšå®¢çš„JavaScripté—®é¢˜é›†é”¦ï¼Œçœ‹åˆ°äº†è¿™é“é¢˜ï¼šé—®é¢˜ï¼š å°è¯•è§£é‡Šä¸‹è¿žç­‰èµ‹å€¼çš„è¿‡ç¨‹ã€‚ä¸‹é¢çš„ä»£ç ä¸ºä»€ä¹ˆæ˜¯è¿™æ ·çš„è¾“å‡ºï¼Ÿ12345var a = &#123;n: 1&#125;; var b = a;a.x = a = &#123;n: 2&#125;; console.log(a.x);// --&gt; undefined console.log(b.x);// --&gt; &#123;n:2&#125; åšä¸»æ˜¯è¿™æ ·è§£é‡Šçš„ï¼š æŒ‰ç…§es5è§„èŒƒï¼Œé¢˜ä¸­è¿žç­‰èµ‹å€¼ç­‰ä»·äºŽa.x = (a = {n: 2});ï¼ŒæŒ‰ä¼˜å…ˆèŽ·å–å·¦å¼•ç”¨ï¼ˆlrefï¼‰ï¼Œç„¶åŽèŽ·å–å³å¼•ç”¨ï¼ˆrrefï¼‰çš„é¡ºåºï¼Œa.xå’Œaä¸­çš„aéƒ½æŒ‡å‘äº†{n: 1}ã€‚è‡³æ­¤ï¼Œè‡³å…³é‡è¦æˆ–è€…è¯´æœ€è¿·æƒ‘çš„ä¸€æ­¥æ˜Žç¡®ã€‚(a = {n: 2})æ‰§è¡Œå®ŒæˆåŽï¼Œå˜é‡aæŒ‡å‘{n: 2}ï¼Œå¹¶è¿”å›ž{n: 2};æŽ¥ç€æ‰§è¡Œa.x = {n: 2}ï¼Œè¿™é‡Œçš„aå°±æ˜¯bï¼ˆæŒ‡å‘{n: 1}ï¼‰ï¼Œæ‰€ä»¥b.xå°±æŒ‡å‘äº†{n: 2}ã€‚ åŽé¢è‡ªå·±æƒ³äº†ä¸‹æœ‰ç‚¹è§£é‡Šä¸é€šï¼Œå› ä¸ºå½“açš„æŒ‡å‘æ›´æ”¹çš„æ—¶å€™ï¼Œa.xä¸­çš„aæŒ‡å‘ä¹Ÿåº”è¯¥åŒæ—¶æ›´æ”¹ï¼Œé‚£ä¹ˆxå±žæ€§ä¹Ÿåº”è¯¥æ˜¯åœ¨æ–°çš„å¯¹è±¡ä¸Šæ·»åŠ ï¼Œä¸ºä»€ä¹ˆä¼šè¯´è¿™é‡Œçš„aä»ç„¶å°±æ˜¯bå³æŒ‡å‘çš„æ˜¯{n: 1},æ‰€ä»¥å¯¹åŽŸä»£ç è¿›è¡Œäº†æ”¹é€ ï¼š12345678var a = &#123;n: 1&#125;; var b = a;function test () &#123; return a = &#123;n: 2&#125;;&#125;a.x = test();console.log(a.x);// --&gt; undefined console.log(b.x);// --&gt; &#123;n:2&#125; è¿è¡Œç»“æžœä¸ŽåŽŸç»“æžœç›¸åŒã€‚åœ¨ä½¿ç”¨chromeçš„debuggeræŸ¥çœ‹ä»£ç è¿è¡Œçš„æ—¶å€™ï¼Œå‘çŽ°chromeåœ¨è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œè¿è¡Œåˆ°a.x = test()è¿™è¡Œä»£ç çš„æ—¶å€™ä¼šåœç•™åœ¨a.xå†è¿è¡Œtest(),è”ç³»åˆ°å…³äºŽå±žæ€§åœ¨åŽŸåž‹é“¾ä¸Šçš„æœç´¢ï¼Œä½œå‡ºä»¥ä¸‹çš„è§£é‡Šï¼ša.x = a = {n: 2}åœ¨è¿è¡Œè¿‡ç¨‹ä¸­æµè§ˆå™¨ä¼šé¦–å…ˆå°è¯•è¯»å–å±žæ€§xçš„å€¼ï¼Œå³åœ¨{n: 1}ä¸Šæœç´¢xå±žæ€§ï¼Œåœ¨æœç´¢ä¸åˆ°çš„å‰æä¸‹åˆç”±äºŽèµ‹å€¼çš„æ“ä½œï¼Œä¼šåœ¨{n: 1}ä¸Šåˆ›å»ºxå±žæ€§å¹¶ä¸”xå±žæ€§æŒ‡å‘{n: 2},ç”±äºŽaçš„æŒ‡å‘å‘ç”Ÿå˜æ›´,æ‰€ä»¥a.xä¸ºundefined,b.xä¸º{n: 2}jsæ‰§è¡Œè¿žç­‰èµ‹å€¼è¯­å¥ä¹‹å‰ï¼Œä¼šå–å‡ºå˜é‡çš„å¼•ç”¨ã€‚a.x = a = {n: 2}åœ¨è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œç”±äºŽ.è¿ç®—ç¬¦çš„ä¼˜å…ˆçº§æ¯”=è¿ç®—ç¬¦ä¼˜å…ˆçº§é«˜ï¼Œæ‰€ä»¥æµè§ˆå™¨ä¼šå…ˆæ‰§è¡Œa.xçš„æ“ä½œï¼Œä¹Ÿå°±æ˜¯è¯»å–açš„æ“ä½œï¼Œæ­¤æ—¶aä»æŒ‡å‘{n: 1}ï¼Œæ‰§è¡Œç»“æžœä¸ºundefinedï¼Œä½†æ˜¯ç”±äºŽèµ‹å€¼æ“ä½œï¼Œæ­¤æ—¶ä¼šç»™{n: 1}å¢žåŠ xå±žæ€§è¿™ä¸ªå€¼ï¼Œæ‰€ä»¥a.xä¸­çš„aä»ç„¶æŒ‡å‘{n: 1}ï¼Œä¸”å±žæ€§xçš„å€¼ä¸ºa = {n: 2}çš„æ‰§è¡Œç»“æžœã€‚å› ä¸ºåœ¨æ‰§è¡Œa = {n: 2}çš„è¿‡ç¨‹ä¸­æ”¹å˜äº†açš„æŒ‡å‘ï¼Œæ‰€ä»¥console.log(a.x)å…¶ç»“æžœä¸ºundefinedï¼Œb.xç»“æžœä¸º{n: 1}ã€‚]]></content>
      <categories>
        <category>JavaScript</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Vue2.xå‘¨æœŸç®€è¿°]]></title>
    <url>%2F2017%2F10%2F28%2FVue2-x%E5%91%A8%E6%9C%9F%E7%AE%80%E8%BF%B0%2F</url>
    <content type="text"><![CDATA[é¦–å…ˆè´´ä¸€å¼ å¤§å›¾ï¼Œè·Ÿvue1.xç›¸æ¯”ã€‚vue2.0æ¸²æŸ“å‘¨æœŸå‘ç”Ÿäº†è¾ƒå¤§çš„å˜åŒ–ã€‚Vueçš„ç”Ÿå‘½å‘¨æœŸå˜ä¸ºbeforeCreateï¼ˆVue1.xä¸ºcreatedï¼‰ï¼Œcreatedï¼ˆvue1.xä¸ºbeforeCompileï¼‰ï¼ŒbeforeMountï¼ˆvue1.xä¸ºcompileï¼‰ï¼Œmountedï¼ˆvue1.xä¸ºreadyï¼‰ä»¥åŠbeforeDestroyï¼Œdestroyed. beforeCreateå‘¨æœŸåœ¨beforeCreateå‘¨æœŸå‰æ˜¯èŽ·å–ä¸åˆ°ä»»ä½•æ•°æ®çš„ï¼Œè¿™ä¸ªå‘¨æœŸåªæ˜¯è¿›è¡Œäº‹ä»¶çš„åˆå§‹åŒ–ä»¥åŠç”Ÿå‘½å‘¨æœŸçš„åˆå§‹åŒ–ï¼Œåœ¨å®Œæˆäº‹ä»¶çš„åˆå§‹åŒ–ä»¥åŠç”Ÿå‘½å‘¨æœŸçš„åˆå§‹åŒ–åŽä¼šè§¦å‘beforeCreateçš„é’©å­å‡½æ•°ï¼Œå¯¹äºŽæ— å…³æ•°æ®ä¸Žæ¸²æŸ“åŽçš„domæ“ä½œçš„å¯ä»¥åœ¨è¿™ä¸ªå‘¨æœŸå¼€å§‹æ‰§è¡Œ createdå‘¨æœŸåœ¨createdå‘¨æœŸå‰ï¼Œå¯¹æ•°æ®é€šè¿‡vueæœ¬èº«æ”¹é€ Object.prototype.setter å’ŒObject.prototype.getterä¸¤ä¸ªå‡½æ•°å¯¹ä¼ å…¥çš„æ•°æ®è¿›è¡Œç›‘å¬ï¼Œåœ¨è¿™ä¸ªå‘¨æœŸå¯ä»¥å¯¹æ— å…³domçš„æ“ä½œè¿›è¡Œå¤„ç†ï¼Œæ¯”å¦‚æ ¹æ®ä¼ å…¥çš„æ•°æ®èŽ·å–åŽå°æ•°æ®ç­‰æ“ä½œå¯ä»¥åœ¨è¿™ä¸ªå‘¨æœŸè¿›è¡Œ beforeMountå‘¨æœŸåœ¨è¿™ä¸ªå‘¨æœŸä¸»è¦å®Œæˆè™šæ‹Ÿdomæ“ä½œï¼ŒVueä¼šåŽ»æ£€æµ‹æ˜¯å¦æœ‰æ²¡æœ‰elè¿™ä¸ªé…ç½®ï¼Œå¦‚æžœæ²¡æœ‰ï¼Œåˆ™ä¼šç­‰å¾…vm.$mounted(el)çš„è°ƒç”¨ã€‚æŽ¥ç€æ£€æµ‹æ˜¯å¦æœ‰æ²¡æœ‰templateè¿™ä¸ªé…ç½®ã€‚å¦‚æžœæœ‰ï¼Œè¿™å°†è¿™ä¸ªä¼ å…¥renderå‡½æ•°è¿›è¡Œç¼–è¯‘ï¼Œå¦‚æžœæ²¡æœ‰ï¼Œåˆ™å°†elå…ƒç´ å†…éƒ¨çš„domä½œä¸ºtemplateå‚æ•°ä¼ å…¥renderã€‚å¯¹äºŽè¿™ä¸ªå‘¨æœŸå¦‚æžœä¸æ¶‰åŠåˆ°äº‹ä»¶ç»‘å®šæ–¹é¢çš„äº‹ä»¶å¯ä»¥åœ¨è¿™ä¸ªå‘¨æœŸè¿›è¡Œæ“ä½œ mountedå‘¨æœŸè¿™ä¸ªå‘¨æœŸæ˜¯å®Œæˆå°†æž„å»ºçš„è™šæ‹Ÿdomæ¸²æŸ“åˆ°é¡µé¢ä¸Šçš„æ“ä½œï¼Œè¿™ä¸ªæ—¶å€™å¯ä»¥å¯¹æ•´ä¸ªé¡µé¢è¿›è¡Œæ¸²æŸ“å®ŒæˆåŽçš„å„ç§åŠ¨æ€æ“ä½œ beforeDestroyå‘¨æœŸå’Œdestroyedå‘¨æœŸbeforeDestroyå‘¨æœŸå’Œdestroyedå‘¨æœŸä¸»è¦æ¶‰åŠåˆ°ç»„ä»¶çš„!é”€æ¯,ç›®å‰å°šæœªæ¶‰åŠï¼Œç­‰æ¶‰åŠäº†å†è¡¥ä¸Š]]></content>
      <categories>
        <category>ç¬”è®°</category>
      </categories>
      <tags>
        <tag>ç¬”è®°</tag>
        <tag>Vue</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[event loopå­¦ä¹ å›žé¡¾]]></title>
    <url>%2F2017%2F10%2F27%2Fevent-loop%E5%AD%A6%E4%B9%A0%E5%9B%9E%E9%A1%BE%2F</url>
    <content type="text"><![CDATA[ä»¥å‰äº‹ä»¶é˜Ÿåˆ—åœ¨æˆ‘çš„è®¤çŸ¥èŒƒå›´å†…æ˜¯åªæœ‰ä¸¤ç§ï¼šåŒæ­¥äº‹ä»¶é˜Ÿåˆ—ä¸Žå¼‚æ­¥äº‹ä»¶é˜Ÿåˆ—ã€‚åœ¨å¤„ç†äº‹ä»¶é˜Ÿåˆ—è¿‡ç¨‹ä¸­ï¼Œæµè§ˆå™¨ä¼šå®šæœŸæ£€æµ‹åŒæ­¥é˜Ÿåˆ—å¹¶ä»ŽåŒæ­¥äº‹ä»¶é˜Ÿåˆ—èŽ·å–äº‹ä»¶ï¼Œå¹¶å°†ä¹‹æ‰§è¡Œï¼Œåœ¨è¿™è¿‡ç¨‹ä¸­ï¼Œå¼‚æ­¥é˜Ÿåˆ—è§¦å‘å›žè°ƒäº‹ä»¶æ—¶ï¼Œä¼šå°†å…¶ä»Žå¼‚æ­¥é˜Ÿåˆ—ä¸­å‡ºé˜Ÿï¼ŒåŠ å…¥åˆ°åŒæ­¥äº‹ä»¶é˜Ÿåˆ—ä¸­ï¼Œä¸€ç›´é‡å¤ä¸Šè¿°è¿‡ç¨‹ã€‚ ä½†åœ¨è¿™é‡Œæœ‰ä¸ªç–‘é—®ï¼Œå½“å¤šä¸ªå¼‚æ­¥äº‹ä»¶é˜Ÿåˆ—åŒæ—¶åˆ°åŒæ­¥é˜Ÿåˆ—è¿‡ç¨‹ä¸­æ˜¯ä»¥ä»€ä¹ˆæ ‡å‡†åŽ»å®žçŽ°çš„ï¼Ÿ è¿™ä¸ªç–‘é—®ç›´åˆ°å‰æ®µæ—¶é—´çœ‹Vueæœ‰å…³çš„åšå®¢ä¸­æ— æ„é—´çœ‹åˆ°Chunk liuçš„Vueæºç è¯¦è§£ä¹‹nextTickï¼šMutationObserveråªæ˜¯æµ®äº‘ï¼Œmicrotaskæ‰æ˜¯æ ¸å¿ƒæ‰äº†è§£åˆ°microTaskçš„æ¦‚å¿µï¼Œæ‰çŸ¥é“taskçš„åŒºåˆ†ä¸æ˜¯æˆ‘åŽŸå…ˆç†è§£çš„é‚£ä¹ˆä¸€å›žäº‹ã€‚åŽé¢åˆè¯»äº†Jake Archibald å†™çš„Tasksï¼Œ microtasksï¼Œ queues and schedulesæ‰çŸ¥é“event loopåˆ°åº•æ˜¯ä¸ªæ€Žä¹ˆå›žäº‹ã€‚ å…ˆè¯´ä¸‹taskè·ŸmicroTaskçš„æ¦‚å¿µ tasktask åˆç§° macrotaskã€‚HTML è§„èŒƒä¸­ task çš„æœ‰å…³ç« èŠ‚æ˜¯è¿™ä¹ˆè¯´çš„ï¼š ä¸€ä¸ª eventloop æœ‰ä¸€æˆ–å¤šä¸ª task é˜Ÿåˆ—ã€‚æ¯ä¸ª task ç”±ä¸€ä¸ªç¡®å®šçš„ task æºæä¾›ã€‚ä»Žä¸åŒ task æºè€Œæ¥çš„ task å¯èƒ½ä¼šæ”¾åˆ°ä¸åŒçš„ task é˜Ÿåˆ—ä¸­ã€‚ä¾‹å¦‚ï¼Œæµè§ˆå™¨å¯èƒ½å•ç‹¬ä¸ºé¼ æ ‡é”®ç›˜äº‹ä»¶ç»´æŠ¤ä¸€ä¸ª task é˜Ÿåˆ—ï¼Œæ‰€æœ‰å…¶ä»– task éƒ½æ”¾åˆ°å¦ä¸€ä¸ª task é˜Ÿåˆ—ã€‚é€šè¿‡åŒºåˆ† task é˜Ÿåˆ—çš„ä¼˜å…ˆçº§ï¼Œä½¿é«˜ä¼˜å…ˆçº§çš„ task ä¼˜å…ˆæ‰§è¡Œï¼Œä¿è¯æ›´å¥½çš„äº¤äº’ä½“éªŒã€‚ taskæºåŒ…æ‹¬ï¼š DOM æ“ä½œä»»åŠ¡æºï¼šå¦‚å…ƒç´ ä»¥éžé˜»å¡žæ–¹å¼æ’å…¥æ–‡æ¡£ ç”¨æˆ·äº¤äº’ä»»åŠ¡æºï¼šå¦‚é¼ æ ‡é”®ç›˜äº‹ä»¶ã€‚ç”¨æˆ·è¾“å…¥äº‹ä»¶ï¼ˆå¦‚ clickï¼‰ å¿…é¡»ä½¿ç”¨ task é˜Ÿåˆ— ç½‘ç»œä»»åŠ¡æºï¼šå¦‚ XHR å›žè°ƒ history å›žæº¯ä»»åŠ¡æºï¼šä½¿ç”¨ history.back() æˆ–è€…ç±»ä¼¼ APIæ­¤å¤– setTimeoutã€setIntervalã€IndexDB æ•°æ®åº“æ“ä½œç­‰ä¹Ÿæ˜¯ä»»åŠ¡æºã€‚ microTaskmicroTaskï¼šè§„èŒƒä¸Šæ˜¯è¿™ä¹ˆè¯´çš„ï¼šæ¯ä¸ªevent loopéƒ½æœ‰ä¸€ä¸ªmicroTaskï¼Œ microTaskå­˜åœ¨äºŽmicroTaské˜Ÿåˆ—ä¸­ã€‚microTaskä¸»è¦åˆ†ä»¥ä¸‹å‡ ç§ï¼š Promise.then MutationObserver Object.observeå…¶ä¸­Promise.thenç”±äºŽä¸åŒæµè§ˆå™¨çš„å®žçŽ°æœ‰æ‰€ä¸åŒï¼Œæœ‰äº›è¿è¡Œè§¦å‘çš„æ˜¯microTaskï¼Œæœ‰äº›è§¦å‘çš„è§¦å‘çš„æ˜¯taskï¼Œä¸è¿‡æ ‡å‡†ä¸Šæ˜¯è§¦å‘microTaskçš„ event loopçš„å¾ªçŽ¯è¿‡ç¨‹åœ¨è¯´äº†taskè·ŸmicroTaskçš„æ¦‚å¿µåŽå†è¯´ä¸‹event loopçš„å¾ªçŽ¯è¿‡ç¨‹ã€‚å…ˆè´´ä¸€ä¸‹è§„èŒƒçš„è¯´æ³•(æœ‰ç‚¹å‡‘å­—æ•°çš„å«Œç–‘ã€‚ã€‚ã€‚)ï¼š An event loop must continually run through the following steps for as long as it exists: Select the oldest task on one of the event loopâ€™s task queues, if any, ignoring, in the case of a browsing context event loop, tasks whose associated Documents are not fully active. The user agent may pick any task queue. If there is no task to select, then jump to the microtasks step below. Set the event loopâ€™s currently running task to the task selected in the previous step. Run: Run the selected task. Set the event loopâ€™s currently running task back to null. Remove the task that was run in the run step above from its task queue. Microtasks: Perform a microtask checkpoint. //è¿™é‡Œä¼šæ‰§è¡Œæ‰€æœ‰çš„microtask Update the rendering: If this event loop is a browsing context event loop (as opposed to a worker event loop), then run the following substeps.7.1 Let now be the value that would be returned by the Performance objectâ€™s now() method.7.2 Let docs be the list of Document objects associated with the event loop in question, sorted arbitrarily except that the following conditions must be met:7.3 If there are top-level browsing contexts B that the user agent believes would not benefit from having their rendering updated at this time, then remove from docs all Document objects whose browsing contextâ€™s top-level browsing context is in B.7.4 If there are a nested browsing contexts B that the user agent believes would not benefit from having their rendering updated at this time, then remove from docs all Document objects whose browsing context is in B.7.5 For each fully active Document in docs, run the resize steps for that Document, passing in now as the timestamp. [CSSOMVIEW]7.6 For each fully active Document in docs, run the scroll steps for that Document, passing in now as the timestamp. [CSSOMVIEW]7.7 For each fully active Document in docs, evaluate media queries and report changes for that Document, passing in now as the timestamp. [CSSOMVIEW]7.8 For each fully active Document in docs, run CSS animations and send events for that Document, passing in now as the timestamp. [CSSANIMATIONS]7.9 For each fully active Document in docs, run the fullscreen rendering steps for that Document, passing in now as the timestamp. [FULLSCREEN]7.10 For each fully active Document in docs, run the animation frame callbacks for that Document, passing in now as the timestamp.7.11 For each fully active Document in docs, run the update intersection observations steps for that Document, passing in now as the timestamp. [INTERSECTIONOBSERVER]7.12 For each fully active Document in docs, update the rendering or user interface of that Document and its browsing context to reflect the current state.If this is a worker event loop (i.e. one running for a WorkerGlobalScope), but there are no tasks in the event loopâ€™s task queues and the WorkerGlobalScope objectâ€™s closing flag is true, then destroy the event loop, aborting these steps, resuming the run a worker steps described in the Web workers section below.Return to the first step of the event loop. å¤è¿°ä¸€ä¸‹ä¸Šé¢è¯´çš„ åœ¨å‰5çš„æ­¥éª¤æ˜¯æ‰¾å‡ºå­˜åœ¨taské˜Ÿåˆ—ä¸­æ—¶é—´æœ€é•¿çš„taskï¼Œå‡ºé˜Ÿå¹¶å°†ä¹‹æ‰§è¡Œã€‚åœ¨ç¬¬å…­æ­¥çš„æ—¶å€™å°†microTaské˜Ÿåˆ—ä¸­çš„microTaskå…¨éƒ¨æ‰§è¡Œç¬¬ä¸ƒæ­¥ï¼Œæ›´æ–°æ¸²æŸ“ï¼š7.2åˆ°7.4ï¼Œå½“å‰è½®æ¬¡çš„event loopä¸­å…³è”åˆ°çš„documentå¯¹è±¡ä¼šä¿æŒæŸäº›ç‰¹å®šé¡ºåºï¼Œè¿™äº›documentå¯¹è±¡éƒ½ä¼šæ‰§è¡Œéœ€è¦æ‰§è¡ŒUI renderçš„ï¼Œä½†æ˜¯å¹¶ä¸æ˜¯æ‰€æœ‰å…³è”åˆ°çš„documentéƒ½éœ€è¦æ›´æ–°UI(æ¢ä¸ªè¯´æ³•å°±æ˜¯åªæœ‰ä»ŽUI Renderæ”¶ç›Šçš„documnetæ‰éœ€è¦æ›´æ–°)ï¼Œæµè§ˆå™¨ä¼šåˆ¤æ–­è¿™ä¸ªdocumentæ˜¯å¦ä¼šä»ŽUI Renderä¸­èŽ·ç›Šï¼Œå› ä¸ºæµè§ˆå™¨åªéœ€è¦ä¿æŒ60Hzçš„åˆ·æ–°çŽ‡å³å¯ï¼Œè€Œæ¯è½®event loopéƒ½æ˜¯éžå¸¸å¿«çš„ï¼Œæ‰€ä»¥æ²¡å¿…è¦æ¯ä¸ªdocumentéƒ½Render UIã€‚7.5å’Œ7.6 run the resize steps/run the scroll stepsä¸æ˜¯è¯´åŽ»æ‰§è¡Œresizeå’Œscrollã€‚æ¯æ¬¡æˆ‘ä»¬scollçš„æ—¶å€™è§†å£æˆ–è€…domå°±å·²ç»ç«‹å³scrolläº†ï¼Œå¹¶æŠŠdocumentæˆ–è€…domåŠ å…¥åˆ° pending scroll event targetsä¸­ï¼Œè€Œrun the scroll stepså…·ä½“åšçš„åˆ™æ˜¯éåŽ†è¿™äº›targetï¼Œåœ¨targetä¸Šè§¦å‘scrolläº‹ä»¶ã€‚run the resize stepsä¹Ÿæ˜¯ç›¸ä¼¼çš„ï¼Œè¿™ä¸ªæ­¥éª¤æ˜¯è§¦å‘resizeäº‹ä»¶ã€‚7.8å’Œ7.9 åŽç»­çš„media query, run CSS animations and send eventsç­‰ç­‰ä¹Ÿæ˜¯ç›¸ä¼¼çš„ï¼Œéƒ½æ˜¯è§¦å‘äº‹ä»¶ï¼Œç¬¬10æ­¥å’Œç¬¬11æ­¥åˆ™æ˜¯æ‰§è¡Œæˆ‘ä»¬ç†Ÿæ‚‰çš„requestAnimationFrameå›žè°ƒå’ŒIntersectionObserverå›žè°ƒï¼ˆç¬¬åæ­¥è¿˜æ˜¯æŒºå…³é”®çš„,rafå°±æ˜¯åœ¨è¿™æ‰§è¡Œçš„ï¼ï¼‰ã€‚7.12 æ¸²æŸ“UIï¼Œå…³é”®å°±åœ¨è¿™äº†ã€‚ç¬¬ä¹æ­¥ ç»§ç»­æ‰§è¡Œevent loopï¼ŒåˆåŽ»æ‰§è¡Œtaskï¼Œmicrotaskså’ŒUI renderã€‚ ä¸ªäººç†è§£æ˜¯åœ¨event loopè¿‡ç¨‹ä¸­ï¼Œä¼šå¾ªçŽ¯æ£€æµ‹å„ä¸ªtaské˜Ÿåˆ—ä¸­çš„taskï¼ŒèŽ·å–åœç•™æ—¶é—´æœ€ä¹…çš„taskï¼Œå‡ºé˜Ÿå¹¶å°†ä¹‹æ‰§è¡Œã€‚åœ¨æ‰§è¡Œå®ŒåŽï¼Œä¼šåŽ»æ£€æµ‹microTaské˜Ÿåˆ—å¹¶æ‰§è¡Œåœ¨è¿™ä¸ªtaskè¿‡ç¨‹ä¸­ç”Ÿæˆçš„microTaskä»¥åŠmicorTaskæ‰§è¡Œè¿‡ç¨‹ä¸­ç”ŸæˆmicroTaskï¼Œåœ¨æ‰§è¡Œå®ŒæˆåŽè¿›è¡Œé¡µé¢çš„æ›´æ–°æ“ä½œã€‚è¿™é‡Œä¸¾ä¸ªðŸŒ°ï¼š1234567console.log('script start')setTimeout(() =&gt; console.log('setTimeout'), 0)Promise.resolve().then(() =&gt; console.log('Promise1')).then(() =&gt; console.log('Promise2'))console.log('script end') æ‰§è¡Œç»“æžœå¦‚ä¸‹12345script startscript endPromise1Promise2setTimeout æµè§ˆå™¨é¦–å…ˆæ‰§è¡Œçš„æ˜¯scriptè§£æžçš„taskï¼Œæ‰€ä»¥æœ€å…ˆæ‰“å°çš„æ˜¯åœ¨è¿™ä¸ªtaskä¸­æ‰§è¡Œçš„console.logï¼Œç„¶åŽåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼ŒPromiseä¼šç”Ÿæˆäº†ä¸€ä¸ªmicroTaskå¹¶å°†å…¶åŠ å…¥microTaské˜Ÿåˆ—ä¸­ï¼ŒsetTimeoutä¼šç”Ÿæˆä¸€ä¸ªtaskå¹¶å°†å…¶åŠ å…¥taské˜Ÿåˆ—ä¸­ã€‚åœ¨æ‰§è¡Œå®Œscriptè§£æžè¿™ä¸ªtaskåŽï¼Œä¼šåŽ»æ£€æµ‹microTaské˜Ÿåˆ—ï¼Œæ­¤æ—¶microtaské˜Ÿåˆ—ä¸­å­˜åœ¨ä¸€ä¸ªç”±Promiseç”Ÿæˆçš„microTaskä»»åŠ¡ï¼Œå°†å…¶æ‰§è¡ŒåŽå…¶è¿”å›žç»“æžœåˆæ‰§è¡Œthenï¼Œå› æ­¤æœ‰ç”Ÿæˆä¸€ä¸ªmicroTaskï¼Œå°†å…¶åŠ å…¥åˆ°microTaské˜Ÿåˆ—ä¸­ï¼Œæ‰§è¡Œå®ŒæˆåŽç»§ç»­å°†microTaské˜Ÿåˆ—æ‰§è¡Œå®Œæˆã€‚åœ¨microTaské˜Ÿåˆ—æ‰§è¡Œå®ŒæˆåŽç»§ç»­æ£€æµ‹taské˜Ÿåˆ—ï¼Œæ­¤æ—¶å­˜åœ¨ä¸€ä¸ªsetTimeoutç”Ÿæˆçš„taskï¼Œå°†å…¶å®ŒæˆåŽæœ€ç»ˆç»“æžœå°±å¦‚ä¸Šæ‰€ç¤ºã€‚ å‚è€ƒèµ„æ–™ Vueæºç è¯¦è§£ä¹‹nextTickï¼šMutationObserveråªæ˜¯æµ®äº‘ï¼Œmicrotaskæ‰æ˜¯æ ¸å¿ƒï¼ Tasks, microtasks, queues and schedules æ·±å…¥æŽ¢ç©¶ eventloop ä¸Žæµè§ˆå™¨æ¸²æŸ“çš„æ—¶åºé—®é¢˜ - 404Forest]]></content>
      <categories>
        <category>ç¬”è®°</category>
      </categories>
      <tags>
        <tag>ç¬”è®°</tag>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[åŒå‘æ•°æ®ç»‘å®šçš„å®žçŽ°]]></title>
    <url>%2F2017%2F10%2F26%2F%E5%8F%8C%E5%90%91%E6%95%B0%E6%8D%AE%E7%BB%91%E5%AE%9A%E7%9A%84%E5%AE%9E%E7%8E%B0%2F</url>
    <content type="text"><![CDATA[æ¨¡ä»¿vueçš„åŒå‘æ•°æ®ç»‘å®š å‰æ®µæ—¶é—´å¬äº†TGideasçš„ä¸€åœºäº¤æµä¼šä¹‹åŽèŒç”Ÿäº†è‡ªå·±å®žçŽ°æ•°æ®åŒå‘ç»‘å®šçš„æƒ³æ³•ï¼ŒäºŽæ˜¯åœ¨å‚è€ƒäº†DMQ/mvvm: å‰–æžvueå®žçŽ°åŽŸç†ï¼Œè‡ªå·±åŠ¨æ‰‹å®žçŽ°mvvmçš„é€»è¾‘åŽç”¨TypeScriptå®žçŽ°äº†ä¸€å¥—ç®€å•çš„åŒå‘æ•°æ®ç»‘å®šçš„åº“é¡¹ç›®åœ°å€åœ¨è¿™å­¦ä¹ vueçš„åŒå‘æ•°æ®ç»‘å®š é¡¹ç›®ä¸»è¦ä»£ç ç›®å½•å¦‚ä¸‹123456789101112src|--Yue|--|--util|--|--|--CompileUtil.ts|--|--|--Updater.ts|--|--Yue.ts|--|--Observer.ts|--|--Compile.ts|--|--Observer.ts|--|--Dep.ts|--|--Watcher.ts|--index.ts æ•´ä¸ªé¡¹ç›®é€šè¿‡srcç›®å½•ä¸‹çš„index.tså¯¹å¤–æš´éœ²å¼•ç”¨ï¼Œä¸»ä½“ç±»æ˜¯Yueç›®å½•ä¸‹çš„Yue.tsã€‚åŒæ—¶Yueç±»ä¸‹é¢è¿˜æœ‰Observer.tsä»¥åŠCompile.tsä¸¤ä¸ªä¸»è¦ç±»ã€‚Observerç±»æ˜¯ç”¨æ¥å»ºç«‹Yueå®žä¾‹åŒ–åŽå¯¹è±¡ä¸‹çš„dataæ•°æ®çš„ç›‘æµ‹ï¼ŒCompileç±»æ˜¯è´Ÿè´£å°†è‡ªå®šä¹‰çš„ä¸€å¥—htmlè¯­æ³•ç³–ç¼–è¯‘æˆæµè§ˆå™¨æ‰€èƒ½ç†è§£çš„domæ ‘utilç›®å½•ä¸‹å­˜æ”¾ç€CompileUtilä»¥åŠUpdaterä¸¤ä¸ªå·¥å…·ç±»ï¼ŒCompileUtilç±»æ˜¯ç¼–è¯‘å·¥å…·ç±»ï¼ŒUpdateræ˜¯æ•°æ®æ›´æ–°å·¥å…·ç±» åŒå‘æ•°æ®ç»‘å®šçš„å®žçŽ°é€»è¾‘ å…·ä½“é€»è¾‘å¯ä»¥å‚è€ƒDMQ/mvvm: å‰–æžvueå®žçŽ°åŽŸç†ï¼Œè‡ªå·±åŠ¨æ‰‹å®žçŽ°mvvmè¿™ç¯‡æ‰€è®²çš„ï¼Œæˆ‘åªæ˜¯å¤§æ¦‚è®²ä¸€ä¸‹å…³äºŽè‡ªå·±çš„ç†è§£ã€‚ å»ºç«‹å¯¹æ•°æ®çš„ç›‘æµ‹ã€‚åœ¨Observerè¿™ä¸ªç±»ä¸­ä½¿ç”¨Object.definePropertyæ–¹æ³•é‡æ–°å®šä¹‰dataä¸Šçš„æ•°æ®ï¼Œå®žçŽ°å¯¹dataçš„æ•°æ®åŠ«æŒã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ä¸ºæ¯ä¸ªå±žæ€§èŠ‚ç‚¹å»ºç«‹ä¸€ä¸ªå‘å¸ƒè€…ï¼Œè¿™ä¸ªå‘å¸ƒè€…æ˜¯é’ˆå¯¹å¯¹åº”çš„å±žæ€§èŠ‚ç‚¹ä»¥åŠå…¶åŽä»£å±žæ€§çš„ã€‚ æ¨¡ç‰ˆçš„è½¬æ¢ã€‚ æ¨¡ç‰ˆçš„èŽ·å–ã€‚é€šè¿‡document.createDocumentFragmentæ–¹æ³•åˆ›å»ºä¸€ä¸ªæ–‡æ¡£ç¢Žç‰‡ï¼Œå¹¶é€šè¿‡appendChildæ–¹æ³•å°†ç¼–è¯‘èŒƒå›´å†…çš„dom&gt;ä»Žæ–‡æ¡£æ ‘ä¸­ç§»é™¤å¹¶åŠ å…¥åˆ°æ–‡æ¡£ç¢Žç‰‡ä¸­ã€‚ æ¨¡ç‰ˆçš„ç¼–è¯‘ã€‚é€šè¿‡node.childNodesé€’å½’éåŽ†æ¯ä¸ªdomèŠ‚ç‚¹ï¼Œä½¿ç”¨æ­£åˆ™åŒ¹é…åˆ¤æ–­æ¯ä¸ªèŠ‚ç‚¹æ˜¯å¦å­˜åœ¨éœ€è¦ç¼–è¯‘çš„æ–‡æœ¬ï¼Œè‹¥å­˜åœ¨ï¼Œåˆ™å°†å…¶è·Ÿdataä¸Šçš„æ•°æ®è¿›è¡ŒåŒ¹é…ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªè®¢é˜…è€…å°†å…¶åŠ å…¥åˆ°ç›¸åº”çš„å‘å¸ƒè€…ä¸­ã€‚ é€šè¿‡åœ¨æ•°æ®ç›‘æµ‹ä»¥åŠdomæ•°æ®ç»‘å®šçš„è¿‡ç¨‹æž„å»ºå‘å¸ƒ-è®¢é˜…çš„è®¾è®¡æ¨¡å¼ï¼Œå®žçŽ°äº†åŒå‘æ•°æ®ç»‘å®š å­˜åœ¨çš„é—®é¢˜ åœ¨ç¼–è¯‘æ¨¡ç‰ˆä¸­å¤šæ¬¡å¼•ç”¨åŒä¸ªdataä¸Šçš„æ•°æ®ä¼šå¯¼è‡´é‡å¤çš„Watcheråˆ›å»ºã€‚ ä¸Šè¿°é—®é¢˜ä»¥åŽä¼šç»§ç»­ç ”ç©¶ï¼Œå¾…ç»­â€¦]]></content>
      <categories>
        <category>ç¬”è®°</category>
      </categories>
      <tags>
        <tag>Vue</tag>
      </tags>
  </entry>
</search>
